## Explicit model-name variant of hk_selected.yml
market: hk
data:
  provider: rqdata
  start_date: '20200101'
  end_date: '20251231'
  cache_dir: cache
  cache_tag: null
  cache_mode: symbol
  cache_refresh_days: 10
  cache_refresh_on_hit: false
  price_col: close
  retry:
    max_attempts: 1
    backoff_seconds: 0.5
    max_backoff_seconds: 5.0
    rotate_tokens: true
  eodhd:
    exchange: HK
    period: d
    order: a
    fmt: json
    hk_symbol_mode: strip_one
  rqdata:
    market: hk
    frequency: 1d
    skip_suspended: true
    fields:
    - close
    - volume
    - total_turnover
  column_map:
    trade_date: trade_date
    ts_code: ts_code
    close: close
    vol: volume
    amount: total_turnover
fundamentals:
  enabled: true
  source: file
  file: out/fundamentals/hk_fundamentals_daily.csv
  endpoint: null
  fields: null
  symbol_param: ts_code
  start_param: start_date
  end_param: end_date
  params: {}
  column_map:
    trade_date: trade_date
    ts_code: ts_code
    market_cap: market_cap
    pe_ttm: pe_ttm
    pb: pb
  features:
  - market_cap
  - pe_ttm
  - pb
  - log_mcap
  auto_add_features: true
  allow_missing_features: true
  required: false
  ffill: true
  ffill_limit: null
  log_market_cap: true
  market_cap_col: market_cap
  log_market_cap_col: log_mcap
universe:
  mode: pit
  require_by_date: true
  symbols: []
  symbols_file: null
  by_date_file: out/universe/universe_by_date.csv
  min_symbols_per_date: 5
  min_listed_days: 60
  min_turnover: 10000000
  drop_st: false
  drop_suspended: true
  suspended_policy: mark
label:
  horizon_mode: next_rebalance
  rebalance_frequency: M
  horizon_days: 20
  shift_days: 1
  target_col: future_return
  winsorize_pct: 0.01
features:
  list:
  - sma_20
  - sma_5_diff
  - sma_10_diff
  - sma_20_diff
  - rsi_14
  - macd_hist
  - volume_sma5_ratio
  - vol
  params:
    sma_windows:
    - 5
    - 10
    - 20
    rsi: 14
    macd:
    - 12
    - 26
    - 9
    volume_sma_windows:
    - 5
  cross_sectional:
    method: zscore
    winsorize_pct: 0.01
model:
  type: elasticnet
  params:
    alpha: 0.1
    l1_ratio: 0.5
    random_state: 42
  sample_weight_mode: date_equal
eval:
  test_size: 0.6
  n_splits: 5
  n_quantiles: 5
  rebalance_frequency: M
  top_k: 20
  signal_direction: 1
  signal_direction_mode: cv_ic
  min_abs_ic_to_flip: 0.002
  transaction_cost_bps: 25
  buffer_exit: 10
  buffer_entry: 5
  sample_on_rebalance_dates: false
  embargo_days: 20
  purge_days: 20
  report_train_ic: true
  save_artifacts: true
  save_dataset: false
  output_dir: out/runs
  run_name: hk_sel_en_a0.1_l0.5
  permutation_test:
    enabled: true
    n_runs: 10
    seed: 42
  walk_forward:
    enabled: true
    n_windows: 4
    test_size: null
    step_size: null
    anchor_end: true
    backtest_enabled: true
    permutation_test:
      enabled: true
      n_runs: 10
      seed: 42
  final_oos:
    enabled: false
    size: null
backtest:
  enabled: true
  top_k: 20
  rebalance_frequency: M
  transaction_cost_bps: 25
  trading_days_per_year: 252
  long_only: true
  short_k: null
  benchmark_symbol: 02800.HK
  exit_mode: rebalance
  exit_horizon_days: null
  buffer_exit: 10
  buffer_entry: 5
  exit_price_policy: delay
  exit_fallback_policy: ffill
